---
id: xmxgf
name: Overview of metadata-booster
file_version: 1.0.2
app_version: 0.9.1-5
file_blobs:
  packages/framework-integration-tests/tsconfig.json: faa039e08e3ec47adff7179d8e0e3390513cb5ab
  packages/framework-integration-tests/package.json: 16c0cc67061af5e471284228c2d91899f01906ed
  packages/metadata-booster/src/index.ts: a3af5e352db7fffe16f902f0295f2a9fa8d97013
---

The `metadata-booster` package ( `ðŸ“„ packages/metadata-booster` ) is a transformer for the TypeScript compiler.

<br/>

A transformer is something like a plugin that extends the compiler functionality, one can configure it in the `tsconfig.json` file of their project, under the plugins section:
<!-- NOTE-swimm-snippet: the lines below link your snippet to Swimm -->
### ðŸ“„ packages/framework-integration-tests/tsconfig.json
```json
â¬œ 19           "ES2019",
â¬œ 20           "ES2020"
â¬œ 21         ],
ðŸŸ© 22         "plugins": [
ðŸŸ© 23           { "transform": "metadata-booster" }
ðŸŸ© 24         ]
â¬œ 25       },
â¬œ 26       "include": [
â¬œ 27         "src/**/*"
```

<br/>

To use this, one has to use a patched TypeScript version, because although the official compiler implements the usage of plugins, it doesn't read the configuration from the `tsconfig.json`file.

<br/>

We're currently advising our users to use `ttypescript` as their compiler, because it's what we've tested, but it has a limitation, it performs what's called **after-transformations**, which is consuming the user's code as an input, and adding code to the TypeScript output, _after_ it has been compiled. Therefore, the TypeScript type checking cannot be leveraged in this case.
<!-- NOTE-swimm-snippet: the lines below link your snippet to Swimm -->
### ðŸ“„ packages/framework-integration-tests/package.json
```json
â¬œ 48         "serverless": "3.8.0",
â¬œ 49         "serverless-artillery": "0.5.2",
â¬œ 50         "subscriptions-transport-ws": "0.9.18",
ðŸŸ© 51         "ttypescript": "1.5.13",
â¬œ 52         "ws": "7.4.5",
â¬œ 53         "yaml": "1.10.2"
â¬œ 54       },
```

<br/>

After adding `ttypescript` as a `devDependency`, the user needs to change their compile/build script to use `ttsc` instead of `tsc`:
<!-- NOTE-swimm-snippet: the lines below link your snippet to Swimm -->
### ðŸ“„ packages/framework-integration-tests/package.json
```json
â¬œ 62         "watch:local": "nodemon --watch ../framework-provider-local/dist --watch ../framework-provider-local-infrastructure --watch dist --exec \"../cli/bin/run start -e local\"",
â¬œ 63         "lint:check": "eslint --ext '.js,.ts' **/*.ts",
â¬œ 64         "lint:fix": "eslint --quiet --fix --ext '.js,.ts' **/*.ts",
ðŸŸ© 65         "compile": "ttsc -b tsconfig.json",
â¬œ 66         "clean": "rimraf ./dist tsconfig.tsbuildinfo",
â¬œ 67         "postinstall": "rimraf ../../node_modules/serverless/node_modules/archiver && echo 'Deleted buggy \"archiver\" module from \"serveless\" dependencies to use the newer hoisted one'",
â¬œ 68         "integration": "npm run integration/cli && npm run integration/local && npm run integration/aws && npm run integration/azure",
```

<br/>

There's an alternative tool, called `ts-patch`, which allows **before-transformations**, but it hasn't been tested because we currently don't need that much power, and when we started the project it didn't exist. And although `ttypescript` is not maintained, while `ts-patch` is, the reality is that the former didn't give us any headaches yet.

What `metadata-booster` does is to parse all classes annotated with a decorator, capture the types of the fields, and adds some specific function calls to the generated code that was generated by the TypeScript compiler, so some reflection information that Booster requires is available.

<br/>

This happens in the `transformer` function.
<!-- NOTE-swimm-snippet: the lines below link your snippet to Swimm -->
### ðŸ“„ packages/metadata-booster/src/index.ts
```typescript
â¬œ 2      import { getClassInfo } from './metadata-extractors'
â¬œ 3      import { createClassMetadataDecorator, createFilterInterfaceFunction } from './statement-creators'
â¬œ 4      
ðŸŸ© 5      const transformer: (program: ts.Program) => ts.TransformerFactory<ts.SourceFile> = (program) => {
â¬œ 6        const checker = program.getTypeChecker()
â¬œ 7        const transformerFactory: ts.TransformerFactory<ts.SourceFile> = (context) => {
â¬œ 8          const f = context.factory
```

<br/>

This file was generated by Swimm. [Click here to view it in the app](https://app.swimm.io/repos/Z2l0aHViJTNBJTNBYm9vc3RlciUzQSUzQWJvb3N0ZXJjbG91ZA==/docs/xmxgf).